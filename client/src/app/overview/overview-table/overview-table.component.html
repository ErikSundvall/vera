<mat-card style="background-color:#f2f2f2;">
  <mat-grid-list cols="24" rowHeight="1.25:1">
    <mat-grid-tile colspan="2">
      <button mat-button>Ny patient</button>
    </mat-grid-tile>
    <mat-grid-tile colspan="3" rowspan="1">
      Antal pat: {{rows.length}}
    </mat-grid-tile>

    <mat-grid-tile colspan="2">
      <button mat-button (click)="print($event)">Rensa filter</button>
    </mat-grid-tile>

    <mat-grid-tile colspan="4">
      <mat-form-field appearance="fill" style="height: 100%; width: 100%">
        <mat-label>Sök...</mat-label>
        <input matInput (keyup)="updateFilter($event)" (click)="$event.target.select()" />
      </mat-form-field>
    </mat-grid-tile>

    <mat-grid-tile colspan="7">
      <div class="checkboxes" style="font-size: 14px">
        Team:
        <span *ngFor="let team of teams">
          {{team.name}} <mat-checkbox [(ngModel)]="team.check" (change)="updateCheckboxFilter()"></mat-checkbox>
        </span>
        <span>Alla <mat-checkbox [(ngModel)]="allTeams" (change)="sortByAll()"></mat-checkbox> </span>
      </div>
    </mat-grid-tile>
    <mat-grid-tile colspan="2">
      <mat-form-field appearance="fill" style="width: 100%; height:100%">
        <mat-label>Läk.</mat-label>
        <mat-select (valueChange)="print($event)">
          <mat-option value="volvo"></mat-option>
          <mat-option value="volvo">1</mat-option>
          <mat-option value="saab">2</mat-option>
          <mat-option value="mercedes">3</mat-option>
          <mat-option value="audi">4</mat-option>
        </mat-select>
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile colspan="2">
      <mat-form-field appearance="fill" style="width: 100%; height:100%">
        <mat-label>Ssk.</mat-label>
        <mat-select>
          <mat-option value="volvo"></mat-option>
          <mat-option value="volvo">1</mat-option>
          <mat-option value="saab">2</mat-option>
          <mat-option value="mercedes">3</mat-option>
          <mat-option value="audi">4</mat-option>
        </mat-select>
      </mat-form-field>
    </mat-grid-tile>
    <mat-grid-tile colspan="2">
      <mat-form-field appearance="fill" style="width: 100%; height:100%">
        <mat-label>Usk.</mat-label>
        <mat-select>
          <mat-option value="volvo"></mat-option>
          <mat-option value="volvo">1</mat-option>
          <mat-option value="saab">2</mat-option>
          <mat-option value="mercedes">3</mat-option>
          <mat-option value="audi">4</mat-option>
        </mat-select>
      </mat-form-field>
    </mat-grid-tile>
  </mat-grid-list>
</mat-card>



<div  *ngIf="!allTeams">
    <ngx-datatable

    #myTable
    class="bootstrap expandable fullscreen"
    [rows]="rows"
    [groupRowsBy]="'team'"
    [columnMode]="'standard'"

    [headerHeight]="40"
    [footerHeight]="0"
    [rowHeight]="30"
    [groupExpansionDefault]="true"
    [externalSorting]="true"
    [sortType]="'multi'"
    [scrollbarV]="true"
    [scrollbarH]="true"
    [virtualization]="false"
    (sort)="sortRows($event)"
    (select)="print($event)"
    (tableContextmenu)="print($event)"
    (activate)="activity($event)"
    >
    <!-- Row Header Template -->
    <ngx-datatable-group-header [rowHeight]="30"  #myGroupHeader  (toggle)="onDetailToggle($event)" >
        <ng-template let-group="group" let-expanded="expanded" let-row="row" ngx-datatable-group-header-template>
          <div class="group-header" style="padding-left:5px; width: 100%x ">
            <a
              href="#"
              onclick="return false"
              id="all_patient_header"
              title="Expand/Collapse Group"
              (click)="toggleExpandGroup(group)"
            >
              <b *ngIf="allTeams" >Alla patienter</b>
              <b *ngIf="!allTeams">Team: {{ group.value[0].team }}</b>
            </a>


          </div>
        </ng-template>
      </ngx-datatable-group-header>
       <!--    Row Column Template     -->

       <!-- Age and prio -->
      <ngx-datatable-column  name="" sortable="true" [frozenLeft]="false" [width]="40">
        <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
          <span class="prio-box" [style.text-shadow]="row['prio']" [style.background-color]="row['prio']"> ▮ </span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column (click)="doubleclick($event)" name="Personnummer(år)(kön)" prop="social" [width]="175" [frozenLeft]="" [sortable]="false">
        <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
           <span> <strong [innerHTML]="row['social']"> </strong> ( <i [innerHTML]="row['age']"></i> )( <span *ngIf="row['gender'] === 'male'">&#9794;</span> <span *ngIf="row['gender'] === 'female'">&#9792;</span> )  </span>
        </ng-template>
      </ngx-datatable-column>
      <!-- Info -->
      <ngx-datatable-column name="Ankomst" prop="arrival"  [sortable]="true" [width]="75"></ngx-datatable-column>
      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
        <span>{{value}}</span>
      </ng-template>
      <ngx-datatable-column name="Checkup" prop="time" [sortable]="true" [width]="75">
        <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
          <span >{{row.time}} min</span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column name="Sökorsak" prop="search"  [width]="100"></ngx-datatable-column>
      <ngx-datatable-column name="Aktivitet" prop="activity" (click)="activityClicked($event)" [width]="75"></ngx-datatable-column>
      <ngx-datatable-column name="Namn" prop="name" [sortable]="true" [width]="75"></ngx-datatable-column>

      <!-- Personel in charge -->
      <ngx-datatable-column name="Anvs.Läk." prop="dr"  [sortable]="true" [width]="90"></ngx-datatable-column>
      <ngx-datatable-column name="Ansv.Ssk." prop="nurse"  [sortable]="true" [width]="90"></ngx-datatable-column>
      <ngx-datatable-column name="Ansv.Usk." prop="nurse2" [sortable]="true" [width]="90"></ngx-datatable-column>

      <ngx-datatable-column name="Team" prop="team" [width]="100" [sortable]="true"></ngx-datatable-column>
      <ngx-datatable-column name="Temp" [width]="100" [sortable]="false"></ngx-datatable-column>
      <ngx-datatable-column name="Temp2" [width]="300" [sortable]="false"></ngx-datatable-column>
      <ngx-datatable-column name="Temp3" [width]="100" [sortable]="false"></ngx-datatable-column>
      <ngx-datatable-column name="Temp4" [width]="300" [sortable]="false"></ngx-datatable-column>
    </ngx-datatable>
</div>
<div *ngIf="allTeams">
  <ngx-datatable

    #fulltable
    class="bootstrap expandable fullscreen"
    [rows]="rows"
    [columnMode]="'standard'"
    [headerHeight]="40"
    [footerHeight]="0"
    [rowHeight]="30"
    [externalSorting]="true"
    [sortType]="'multi'"
    [scrollbarV]="true"
    [scrollbarH]="true"
    [virtualization]="false"
    (sort)="sortRows($event)"
    (select)="print($event)"
    (tableContextmenu)="print($event)"
    (activate)="activity($event)"
  >
    <ngx-datatable-column  name="" sortable="true" [frozenLeft]="false" [width]="40">
      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
        <span class="prio-box" [style.text-shadow]="row['prio']" [style.background-color]="row['prio']"> ▮ </span>
      </ng-template>
    </ngx-datatable-column>

    <ngx-datatable-column (click)="doubleclick($event)" name="Personnummer(år)(kön)" prop="social" [width]="175" [frozenLeft]="" [sortable]="false">
      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
        <span> <strong [innerHTML]="row['social']"> </strong> ( <i [innerHTML]="row['age']"></i> )( <span *ngIf="row['gender'] === 'male'">&#9794;</span> <span *ngIf="row['gender'] === 'female'">&#9792;</span> )  </span>
      </ng-template>
    </ngx-datatable-column>
    <!-- Info -->
    <ngx-datatable-column name="Ankomst" prop="arrival" [sortable]="true" [width]="75"></ngx-datatable-column>
    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
      <span>{{value}}</span>
    </ng-template>
    <ngx-datatable-column name="Checkup" prop="time" [sortable]="true" [width]="75">
      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
        <span >{{row.time}} min</span>
      </ng-template>
    </ngx-datatable-column>

    <ngx-datatable-column name="Sökorsak" prop="search"  [width]="100"></ngx-datatable-column>
    <ngx-datatable-column name="Aktivitet" prop="activity" (click)="activityClicked($event)" [width]="75"></ngx-datatable-column>
    <ngx-datatable-column name="Namn" prop="name" [sortable]="true" [width]="75"></ngx-datatable-column>

    <!-- Personel in charge -->
    <ngx-datatable-column name="Anvs.Läk." prop="dr"  [sortable]="true" [width]="90"></ngx-datatable-column>
    <ngx-datatable-column name="Ansv.Ssk." prop="nurse"  [sortable]="true" [width]="90"></ngx-datatable-column>
    <ngx-datatable-column name="Ansv.Usk." prop="nurse2" [sortable]="true" [width]="90"></ngx-datatable-column>

    <ngx-datatable-column name="Team" prop="team" [width]="100" [sortable]="true"></ngx-datatable-column>
    <ngx-datatable-column name="Temp" [width]="100" [sortable]="false"></ngx-datatable-column>
    <ngx-datatable-column name="Temp2" [width]="300" [sortable]="false"></ngx-datatable-column>
    <ngx-datatable-column name="Temp3" [width]="100" [sortable]="false"></ngx-datatable-column>
    <ngx-datatable-column name="Temp4" [width]="300" [sortable]="false"></ngx-datatable-column>
  </ngx-datatable>
</div>
